/* Datenkommunikation Mitschrift
 * author: d4ryus - https://github.com/d4ruys/
 * vim:tw=80:ai:ts=4:sw=4:spell:foldmethod=expr:nonumber:norelativenumber:foldexpr=NumberFold():

1. Grundlagen der Datenkommunikation
1.1 Rechennetze  und Protokolle

    Rechennetzwerk: Menge von Rechnern, die miteinander durch Austausch von
        Daten kommunizieren, zusammen mit den sie verbindenden.
        uebertragunsmedien steuert.

    Beispiele: Internet, Ethernet, Vermittlungsnetz der Telekom,
        Mobilfunknetzte fuer Rechennetzte

    Rechner: Mainframes, Laptop, Smartphones, Vermittlungsstelle, Router,
        Bridges, Repeater, Gateways, ...

    uebertragunsmedien: Kupferkabel, Lichtwellenleiter, Funkstrecken,
                                                                  Infrarot, ...

    Software:
        Kommunikationsprotokoll (Protokoll):
            Menge von Regeln, die die Kommunikation zwischen Rechnern festlegen.

        Festgelegt werden:
            - Formate von austauschenden Nachrichten
            - Inhalte von Nachrichten, sofern sie zur Steuerung der
              Kommunikation dienen.
            - zeitlichen Ablauf der Kommunikation

        Protokolle werden implementiert: Protokollimplementierungen

        Beispiele fuer Protokolle: TCP, IP, FTP, HTTP, SIP, HDLC, SNTP, ...


1.2 Open Systems Interconnection (OSI) - Referenzmodell

    ...ermoeglicht die Kommunikation offener Systeme (Rechner) innerhalb
    eines 7-Schichtmodells, unabhaengig von:
        - Hardware-Architekturen
        - Betriebsystemen
        - Programmiersprachen
        - Administrationen

    Zentrale Begriffe des OSI-Referrenzmodells (RM):
        - Instanz
        - Dienst: leitet Schicht n an Schicht n+1.
        - Protocol Data Unit (PDU): Standartisiert "virtuelle" Kommunikation
        - Service Data Unit (SDU): innerhalb eines offenen Systems
                                   nicht standartisiert
        - Dienst-Primitiv: Nachrichten, die zwischen offenen Systemen
          ausgetauscht werden, sind Standartisiert.

1.3 Fluss- und Fehlerkontrolle Sei HDLC

    Kommunikationsprotokoll im Datenlink Layer
        HighlevelDataLinkControl

    Anwendungsbereiche:
        - Fluss- und Fehlerkontrolle bei lokalen Netzen
        - ISDN
        - GSM
        - ...
    Mehrere: HDLC-Konfigurationen
        - Operationsmodi
        - Varianten

    Ausgetauscht werden bei HDLC: Frames (=DLPDUs)
        Frames bestehen aus: Steuerdaten + Benutzerdaten
        Flag: kennzeichnet Anfang/Ende eines Frames.
              Inhalt 01111110.
              Problem: Auftauchen dieses Musters 01111110. in Benutzerdaten
              Loesung: Bitstuffing
                Wann immer eine sendende HDLC-Instanz zwischen den Flags 5
                aufeinanderfolgende 1en erkennt, faengt sie direkt dahinter eine
                0 ein, die die empfangende Instanz wieder entfernt.
                Beispiel: Zu senden:
                            011011101111011111011111101111110...
                          Gesendet wird: (wegen Bitstuffing)
                            0110111011110111110011111010111110110...
                          der Empfaenger nimmt die 0en wieder heraus.

    Fehlerkontrolle: - Fehlererkennung
                     - Fehlerkorrektur
                     - Fehlermodifikation

    Flusskontrolle: Schutz eines Empfaengers von zu vielen Nachrichten vom
                    Sender pro Zeitintervall

    Kontrollfeld: Art des HDLC-Frames: U, I, S-Frames, SARM, UA, I RR-, ...
                  Fehler- und Flusskontrolle: N(S), N(R)
                  Mittel: Kenngroeßen: W, M
                          Fehler in HDLC-Frames: N(S), N(R)
                          Daten in Seiten HDLC-Instanzen: V(S), V(R), B(R).
                  Timer: TI (Retransmission Timer)

1.4 Datenpraesentation und -coding mi ASN.1 und BER

    (ASN.1 = Abstract Syntax Notation Number 1, Basic, Encoding Rules)
    OSI-RM betrachtbar als aus zwei Hauptkomponenten bestehend:
        - Anwendungskomponente (Schichten 6, 7)
            Kommunikation ueber abstrakte Syntax:
                Menge formaler Datentypen, von denen Werte zwischen zwei
                Anwendungen ausgetauscht werden.
        - Datentransferkomponente(Schichten 1 - 5)
            Kommunikation ueber Transfersyntax:
                Menge der moeglichen Codierungen jedes Wortes jedes Datentypes
                der abstrakten Syntax, festgelegt durch Codierungsregeln

1.4.1 ASN.1

    Aufgabe: - Syntax von Anwendungsdaten,
             - Definition der APDU, PPDUs,
             - Definition von MIB(Management Information Base)

    Einteilung der ASN.1-Typen:
             - Kalorien
             - Klassen: UNIVERSAL, APPLICATION, context-specific, ...

    ASN.1-Typen werden durch Tags gekennzeichnet, z.B.:
        [UNIVERSAL 2]
        [APPLICATION 1]
        [2] (fuer context-specific Typen)

    ASN.1 erlaubt die Definition neuer Typen:   ::=
        Kundenzahl ::= INTEGER

1.4.2 Basic Encoding Rules (BER)

    Zweck: Codierung aller moeglichen Worte aller moeglichen Typen aus ASN.1

    Codierung nach TCV-Prinzip: Typ Laenge Wert
        primitive: TLV
        constructed: TL (TLV, TL(...), TLV)

    Laengencodierung: Ohne Probleme in einem oktett: Laengen 0, ... 127
        Mit 'Patches' in mehreren Oktetts: Laengen >= 128


2. Internet
2.1 Architekturen und Protokolle

    Schichtenprotokoll: TCP/IP-Stack
        Besonderheit: Layer 2 hat 2 Sublayer: LLC Logic Link Control
                                              MAC Medium Access Control
        Entkapselierung

    Ethernet-Frame: Steuerinfos + Nutzerdaten
                        |-> physikalische Adressen (HW-Adressen,
                                               Ethernet-Adressen, Mac-Adressen)

    Layer 2: IP = Internet Protokoll: IPv4 Nachrichten:IP-Datagramme
                                      IPv6
             Steuerinfos: z.B Logische Adressen (IP Adressen, ...)
                                |-> Netz ID + Host ID Repraesentation: dezimale
                                                  Punktpraesentation: a, b, c, d
             IPv4 hat Probleme: zu wenig Adressen
             => IPv6 mit sechs langen Adressen: 128 bits
                - Erweiterungsheader
             IPv6-Adressen: Hexadezimalnotation, einige Varianten zur
                                                    Verkleinerung
             IPv6-Adress-Arten: Global Unicast Adressen, ...

    Layer: TCP-Segment --->Steuerinfos + Nutzerdaten
           UDP-Segment -´      `->z.B. Portnummern, Nummer fuer Fluss- und
                                     Fehlerkontrolle, Flags(SYN, FIN, ACK, ...)
           TCP-Protokoll
                - Verbindungsaufbau: 3 - Way - Handshake
                - Datenaustausch (in beide Richtungen)
                - Verbindungsabbau (2x getrennt in beiden Richtungen)

2.2 Weiterleitung im Internet
2.2.1 Bruecken

    Netzelement, das zwei oder mehr Rechnernetze auf der Ebene 2 des
    OSI-RM's verbindet, dh. sie verarbeitet Steuerinformation der Ebene zwei,
    zB. physikalische Adressen.

                    |               |
               +-------------------------+
               |  Port            Port   |
               |                         |
               |      Addresstabelle     |
               |                         |
               |  Port            Port   |
               +-------------------------+
                    |               |

    Addresstabelle mit Eintraege folgender Form: (Z, P, T) mit:
        Z: physikalische Zieladdresse
        P: Ausgangsport
        T: Zeitpunkt der letzten Aktualisierung

    Interpretation: Ein eintreffender Frame mit physikalischer Zieladdresse soll
        auf Port P weitergeleitet werden, Der Eintrag wurde zum Zeitpunkt T
        letztemal's aktualisiert.

    Bruecken fuehren aus: Weiterleitungsalgorithmus
                        Lernalgorithmus

    Problem Lernalgorithmus: Zyklen im Netz

2.2.2 Spanning Tree Algorithmus fuer Bruecken (SpTA)

    Aufgabe: Eleminierung von Zyklen im Rechnernetz-Verbunden durch Errechnung
             einer aktiven Baumtopologie

    SpTA-Schritte: - Bestimmung einer sog. "Root-bridge"
                   - Bestimmung der Root-Path-Cost's (RPC's)
                   - Bestimmung der Root Port's
                   - Bestimmung der Designated-Port-Cost's (DPC's)
                   - Bestimmung der Designated Port's

    SpTA-Ergebnis: Zyklenfreie Rechnernetzverbund-Topologie eines Segmenten und
                   aktiven (nicht abgeschlossenen) Ports.

    Bemerkungen: - aktive Baumtopologie ist anfaellig gegen Ausfaelle von Ports,
                   Bruecken und Segmenten
                 - aktive Baumtopologie kann sich aendern, bei:
                    - aenderung der Prioritaet einer Bruecke (ueber SNMP)
                    - aenderung der Kosten eines Netzes
                    - Netzerweiterungen.
                 - Implementierung von SpTA: Austausch von BPDU's (Bridge PDU's)
                    zwischen den Bridges.

    SpTA ist standartisiert: IEEE 807.1d

    Verbesserung von SpTA: RSPT = Rapid Spamming Txe Protocol (IEEE 802.1w)

2.2.3 Router

    Ein Router ist ein Netzelement, das zwei oder mehrere Rechnernetze auf der
        Ebene 3 des OSI-RM's verbindet, dh. er verarbeitet Steuerinformation
        der Ebene 3 zB. IP-Adressen.

    Eigenschaften von Routern:
        - Verwendung logischer Adressen fuer die Weiterleitung, nicht von
          physikalischen Adressen.
        - Weiterleiung nur von IP-Datagrammen, deren umgeleiteter Frame
          physikalisch an diesen Daten adressiert ist.
        - Weiterleiung moeglich zwischen verschiedenartigen Rechnernetzen.

    Zentrale Datenstruktur eines Routers: Routingtabelle mit Eintraegen.
        (ipRootDest, ..., ipRootNextHop, ...)
              |                 |
       Netz-Teil einer   logische Router-Adresse
         IP-Adresse

    Interpretation: Ein eingehendes IP-Datagramm mit loischer Destination
        Adresse ipRouteDest(nur Netz-ID beruecksichtigen) soll zum Router mit
        IP-Adresse ipRootNextHop weitergeleitet werden.

    Weiterleitungsalgorithmus von Routern:
        - verwenden die logischen Adressen von IP-Datagrammen (IP Paket)
        - Router beruecksichtigen nur Frames (und die IP-Pakete darin), die
          physikalisch an sie adressiert sind.

2.2.4 Routing-Verfahren und Routing-Protokolle

    Routing-Verfahren:
        (Lern-)Verfahren, mit Hilfe dessen Router in Zusammenarbeit ihre
        Routingtabellen so mit Eintraegen fuellen koennen, dass sie eintreffende
        Pakete korrekt weiterleiten koennen.

    Routing-Protokoll:
        Kommunikationsprotokoll, das ein Routing-Verfahren durch den Austausch
        von Routing-Informationen zwischen Routern implementiert.

    Beispiele fuer Routing-Protokolle:
        - RIP    fuer   Distanz-Vektor-Routing
        - DSPF   fuer   Link State Shortest Path Routing
          ^                  ^
       Routing            Routing
      Protokolle         Verfahren

    Distanz-Vektor-Routing:

        Motto: Teile deinem Nachbarn mit, wie fuer dich die Welt aussieht.

        Verfahren: Router senden ihre Routing-Tabellen periodisch an ihre
            Nachbarrouter.

        DVR Verwendet: Verbindungstabellen (Adjazenztabellen) fuer direkte
            Nachbarn (Router, Netzte).
        laeuft mehrere Lernrunden

        Das Routing Information Protokoll RIP implementiert das DVR durch Austausch
        von RIP-Paketen (Request, Reply) RFC=2543

        RIP-Reply-Pakete:
            - Kopf: Commend, insbesondere Replies
            - mehrere Routing-Infos: - IP-Adresse(Netz-ID)
                                     - Metrik(Distanz)

    Link-State-Shortest-Path-Routing:

        Motto: Teile der Welt mit, wer Deine Nachbarn sind.

        Verfahren: Router senden bei bestimmten Ereignissen ihre
            Verbindungstabellen an alle andren Router.

        Verfahren laeuft in zwei Schritten:
            - der Link-State Algorithmus bestimmt die aktuelle Topologie des
              Rechennetzverbundes.
            - der Shortest-Path Algorithmus bestimmt danach den kuerzesten Wege
              zwischen diesen Routern, und allen andren Routern im Netz.

        Das Protokoll Open Shortest Path First (OSPF) implementiert das LSSP
            Routing-Verfahren.
        OSPF verwendet Nachrichten (Pakete) mit Link State Advertisements
            (LSAs).

2.3 Anwendungsprotokoll im Internet

    Beispiele: FTP, HTTP; DNS, SMTP, SNMP, SIP, DHCP, CDAP, ...

2.3.1 File Transfer Protocol (FTP)

    Zweck: uebertragung von Dateien:
        - verschiedene Typen: ASCII, Sinarg, ...
        - verschiedene Strukturen: File (kontinuierlichen Byte-Strom ohne
          Struktur), Records, Page
        - Transmission Modes: Stream, block, compressed

    Gaengige Implementierungen: {ASCII, Sinarg}, File Stream.
    FTP-Befehle werden ueber FTP-Baukastenkommandos (nicht standartisiert)
    einfuegen.

    FTP-Datenaustausch geschieht ueber zwei TCP Verbindungen:
        - Steuerverbindung
        - Datenverbindung

    FTP-Kommunikation wird realisiert ueber (standartisierte) FTP-Kommandos.

2.3.2 Hyper Text Transfer Protocol (HTTP)

    Standartprotokoll zum Surfen!

    C/S - Modell: ---> Request
                  <--- Reply

    Request: - Request line : Methoden, z.B. GET
             - Hoster(s)
             - Blank Line
             - Message Ready

    Benutzer-Request: GET <URL> HTTP/1.1
                            |-> "Web-Adresse": Uniform Resource Locator

    Beispiele: - Status Line
               - Header(s)
               - Blank Line
               - Message Body

        Beispiel (Status Line): HTTP/1.1 200 OK

    Headers: Klassen: General, Request, Response, Entity

2.3.3 Domain Name Systems (DNS)

    Aufgabe: Abbildung: Symbolischer Name ---> Ressource
                 "            "       "   ---> logische Internet-Adresse

    Domain name Space: strukturreichen Namenservern.
        Den Knoten sind Domain Names zugeordnet
        Root Domain
        Top Level Domains: generische Domains, Linker-Domains
        Subdomains

    Name Server: Program das Domain-Names logische Adressen zugeordnet

    Name Server leisten den Name Service und sind fuer sogenannte Zonen (Teile)
        des Domain Name Spaces zustaendig.

    Resolver: Programm auf Client-Seite, das in Reaktion auf Anwenderanfragen
        Informationen von Name Servern beschafft.

    Resource Record: Datenstruktur zur Speicherung von Namen und zugehoerigen
        Ressourcen auf einer Machine mit einem Name Server.

        Komponenten: Domain Name als Argument
                            ...
                     Resource Daten

        DNS-Messages:  ---> Queries   enthalten Questions Resource Record (RR)
                       <--- Response  als Antworten

    Ablauf einer Name Resolution (lokal):

        - Client Application verwendet Resolver
        - Resolver schafft von Name Servern die angeforderte Ressource (i. A.
          lg. Adresse) heran
        - Client Application und Server Application koennen miteinander
          kommunizieren.

    Ablauf einer Name Resolution (non-lokal):

            2 wichtige Such-Typen
                rekursiv: Resolver oder ein Name Server in Client-Rolle schicken
                          eine Anfrage ab und erhaelt - nach spuerbarer
                          Verzoegerung - die Antwort.
                intensiv: Resource oder Name Server in Client-Rolle schickt
                          Anfrage, erhaelt vorlaeufige Austausch-Schicht naechste
                          Anfrage bis es die naechste und gute Antwort erhaelt.

            Bemerkung: high level Name Server haben die Annahme rekursiven
                Anfragen abgeschaltet.

            Anhang: Adress Resolver Protocol ARP
                ARP ist eine Layer-3-Protokoll fuer IPv4, nun logischen Adressen
                physikalische Adressen zwecks Weiterleitung von IP-Datasegmenten
                zuzuordnen.

                Printing    ---> ARP Request (Broadcast)
                            <--- ARP Reply   (Unicast von einem Rechner oder
                                              einem Router (Proxy-ARP))

    Nachbemerkung zu DNS/Java:

        Namenaufloesung in Java:
            - static InetAddress   getlocalHost();
            - static InetAddress   getByName(String);
            - static InetAddress[] getAllByName(String);

3. Lokale Netze
3.1 Einfuehrung

    Lokales Netz: Rechnernetz mit einer Groeße in maximal einstelligen
        Kilometerbereich.

    Eigenschaft: unterschiedliche uebergangsmedien: Kupfer/Glasfaser/Funk/
                                                                      Infrarot

    unterschiedliche Topologien: Bus, Stern, Ring

    unterschiedliche Zugriffsverfahren: verteilt...

    einheitliche meist private Administrierung

    Backbone-Netz: Rechnernetz, das Rechnernetze nur bindet (hohe
        Datenuebertragungsraten, unterschiedliche Topologien)

3.2 Ethernet

    Es gilt:
        Klassisches Ethernet: Bustopologie, IO Mbit/s

    Einfuehrung auf hoehere Geschwindigkeiten:
        -> Ethernet-Notation notwendig:
    +-------------------+--------------+-----------------------+
    | Datenrate in Mb/s | Medientyp    | maximale Segmentlaenge |
    |                   | BASE, BROAD  | oder Medien           |
    +-------------------+--------------+-----------------------+
             10              BASE                5
            100              BASE               FX

3.2.1 Klassisches Ethernet

    Medium: Koaxial Kabel
    HW "Transreceiver", gleichberechtigte Stationen

    Eigenschaften: Bus, Broadcast, Halbduplex, CSMA/CD

    Insg.-Struktur: Lager 1, Layer 2a, 2b (Medium Access Control, Logical Link
                                           Control)

    Zugriffsverfahren (Medium Access Control Sublagen 2a):
        Corner Sense Multiple Access/ Collision Detect)
                                      0
    Mehrere Verbindungen von CSMA/CD. |--persistente Varianten.
                                      p

    Framestruktur: 2 Formale: V2-Format
                              IEEE-Format
                                           1
    Logical Link Control: 3 Varianten: LCC 2
                                           3
    Kombination Klassischen Ethernets:
        max. 5 Segmente(Basre) ueber max. 4 Repeater
        max. 2500m (klassisches 10Mbit/s Ethernet.)

    Eigenschaften vom klassischem Ethernet:
        Mindestframelaenge 64 bytes
        errechnet aus: max. laenge Ethernet (2500m mit Repeater)
            uebertragungsgeschwindigkeit des Signals (...m/sec)
            uebertragungsrate: Mbit/s

3.2.2 Schnellere Ethernets

    Fast Ethernet (100Mbit/s)
        zusaetzlich: Sterntopologie.
            Hub    (Multiport-Repeater) im Zentrum: shared   Ethernet
            Switch (Multiport-Bridge)   im Zentrum: switched Ethernet

    Verschiedene Ethernets koennen kombiniert werden!

    => Autonegotiation von der Kommunikation notwendig, um die
        uebertragungspausen - mehr der Stationen auszutauschen (uebertragungsrate,
        uebertragungsmodus [halb/voll duplex])

    Gigabit-Ethernet (1000Mbit/s):
        - Direkt-Verbindungen zwischen Stationen und/oder Switches
        - immer noch die alten Ethernet-Frames!

3.3 Wireless LANs
3.3.1 Einfuehrung

        LAN: lokales Funknetz(drahtloses Netz) zur Datenuebertragung

        Schichtenmodel: +---------------+
                        | Layer 2 | CCC |
                        |         | MAC |
                        +---------------+
                        | Layer 1 | PHY |
                        +---------------+

        Gruppen drahtlos Netz: WPANs (P = Personal) z.B. Bluetooth
                               WLANs (L = local)    z.B. 802.11...
                               WWANs (W = Wide)     z.B. GSM, UMTS, LTE,
                                                         WiMAX,...

3.3.2 WLAN - Netzwerkformen

    - Ad-hoc: Drahtlos kommunizierende Rechner gleichberechtigt innerhalb einer
              Funkzelle, sie bilden einen IBSS
              spontan!

    - Infrastruktur:
        - Organisation von BSSs mit Access Points(APs)
        - APs stellen bereit Zugang zu einer Infrastruktur:
            DS = Distribution System (drahtlos, drahtgebunden).

    - Mesh: irregulaeres Distribution System, MAPs, MPs, MPPs

    - Hotspot

3.3.3 WLAN - Medienzugriff

    Schichtenstruktur in den Endsystemen, im Access Point.

    Grundlagen: 2 Zugriffsverfahren: DCF, PCF auf der Basis vom

        Interframe Spacing: Short IFS (SIFS)
                            PCF   IFS (PIFS)
                            DCF   IFS (DIFS)
        Spacing Times SIFS, ... repraesentieren Prioritaeten beim Aussenden von
        Frames (kurze Zeit = hohe Prioritaet)

    DCS - Verfahren: implementiert: CSMA/CA -> Collision Avoidance

    Grundszenarien: Medium frei:    DIFS (Warten), anschließend
                        sofortige Frame Transmission
                    Medium besetzt: DIFS (Warten), anschließend
                        Contention Period(verschieden lang fuer verschiedene
                           )                                        Stationen)
                     ,----´
                    (
                     `-----> am Ende des Contention Period: Medium frei
                                                         -> Frame Transmission
        von Ende der Contention Period: Medien durch andere Stationen besetzt,
        dessen Frames enthalten ein Duration-Feld (Reservierungszeit dieser
        andreren Stationen) (empfangenes Duration-Feld wird im NAV gespeichert)

    DCF reicht nicht aus, um Kollisionen vollstaendig zu vermeiden.

    Einen der Gruende:
        Hidden Station Problem.

    Patch fuer Hidden station Problem:
        vorheriger Austausch von RTS ---> Kontrollframes um Duration-Feldern
                                 CTS -´
                                  `->Request/Clear to Send

    WLAN Frames: Daten-, Management-, Kontroll-Frames

    DCF reicht nicht fuer Echtzeitanwendungen, insbes. nicht fuer Sprache.
        => PCF(Point Coordination Function): Polling-Verfahren, gesteuert vom
                                             Access Point.

4. Telekommunikation
4.1 ISDN Integrated Services Digital Network
4.1.1 ISDN-Konzepte und Komponenten

    Endgeraete: Telefon, Telefax, ...

    Vermittlungsstellen: Telekom-, privat(NStAs)
        `-->Koppelnetz zum physikalischen Durchschalten von Verbindungen
            Software zur Systemsteuerung
            Schnittstellen
    Prinzipien: mehrere Dienste        ,--->Steuerung
        Trennung: Benutzerdaten, Signalisierungsdaten
        64 kbit/s
        Protokoll-Schichtenmodell

4.1.2 Dienste im ISDN

    Traegerdienste (Bearer Services): stellen Mittel zur zuverlaessigen
        Informationsuebertragung in Echtzeit bereit.
    Teleservices: Transportieren verschiedenartige Infos zwischen Endgeraeten
        wichtig: Telefonie, Telefax
    Zusatzdienste (Supplementary Services) (Leistungsmerkmale)
        Beispiele: Reichrec            ---,--> mit mehreren Varianten
                   Anrufweiterschaltung --

4.1.3 ISDN-Kanaele

    Logische Kanaele: B-Kanal zur Nutzdatenuebertragung
                     D-Kanal zur Signalisierung

    Anschluesse: Basisanschluss (2 B+D)
                Primaermultiplexanschluss (30 B+D)

    Konfigurierbarkeit von Anschluessen:
        Mehrgeraetanschluss (nur Basisanschluss)
        Anlagenanschluss
    physikalische ISDN-Schnittstellen: S(0), S(2M), ...
    logische Kanaele werden auf physikalische Kanaele (physikalische Rahmen) bei
        der uebertragung) abgebildet.

4.1.4 ISDN-Protokollstruktur

    Bloecke: User Protokoll:    Nur physikalisches Durchschalten
            Control Protokoll: Signalisierung-> D-Kanal-Protokoll

    Protokoll auf Laenge 2: D-Kanal-Protokoll fuer:
            - Basis Call Control
            - Supplementary Services

    Messages: Kopf und (mehreren) Informationen Elements

    D-Kanal-Messages Beispiele: SETUP, ALERTING, CONNECT, ...
        `--> nur zwischen Endgeraet und Netz (im Allgemeinen T Vermittlungsstelle)

    Bearer Capability IE (Info Element)
        Spezifikation der Bereitstellung von eines Bearer Services durch das
        Netz.

    Low Layer High Layer Compatibility IE
        Vertraeglichkeits-ueberpruefung durch das angerufene Endgeraet

    Adressierung im ISDN-Netz
        ISDN-Nummer:  identifiziert ISDN-Anschluss
        ISDN-Adresse: ISDN-Nummer + ISDN-Subadresse
                        `---> Country code                  +49
                         |--> National Destination Code     871
                         `--> ISDN Subscriber Number    1234567

    Das D. Kanal Protokoll steuert zusaetzlich die Supplementary Services
        z.B. Rueckruf, Rufumleitung

4.1.5 Signalisierungssystem Nummer 7 (SS#7)

    Aufgabe: Signalisierung zwischen Vermittlungsstellen
    Eigene Nummernklautur SPs, STPs, Signaling links
    Eigenes Schichtenmodell => Datenentkapselierung
    ISDN Nachrichten: IAM, ACM, ANM, ...

4.2 Mobile Kommunikation mit GSM
4.2.1 Einfuehrung

    interpolation von DK mit TK
    - Mobilitaet: - Geraetemobilitaet: Teilnehmer drahtlos angeschlossen
                 - persoenliche Mobilitaet: Teilnehmer kann Dienste ueber
                                          Identifizierung an vielen Geraeten
                                          abgreifen.
    Beispielsysteme: GSM, UMTS, LTE

4.2.2 Physikalische Mobilfunkkanaele

    Funkkanal:      Traegerfrequenz, auf die Signale aufmoduliert werden koennen.

    Duplexfunktion: Verfahren zur gleichzeitigen Nutzung eines Mediums in beiden
                    Kommunikationsrichtungen.
        Beispiele: SPD, FDD, TDD

    Vielfachzugriffsverfahren: Verfahren zur Mehrfachnutzung eines Mediums
                    durch verschiedene
        Beispiele: SDMA, FDMA, TDMA, (CDMA sei DMTS)

    GSM kombiniert SDMA, FDD, FDMA, TDMA

4.2.3 Zellulartechnik

    Zentrales Konstrukt: Zelle: Geografisch separater Funkbereich, der von
                                einer zentralen Funkstation (Basisstation)
                                abgedeckt wird.
    Characteristika: - Zellen, modelliert Hexagone, mit
                           Teilnehmer-Dichte-abhaengigen Radius
                     - Frequenzkennung
                     - Frequenzprotokoll-Mindestabstand
                     - Handoms

4.2.4 GSM-Netz-Organisation
                                                   ,--> = Vermittlungsstelle
    Organisation nach Komponenten: MS, BTS, ..., MSCs, HLR, VLR
      `---> "unterorganisiert" nach                    `---.---'
            Subsystemen: Funknetz ISSS          unterstuetzende Datenbasen
            mobilvermittlungsnetz SMSS, ...

    Organisation nach administrativen Bereichen
        ...

    Organisation nach Rufnummern, Kennziffern

    Organisation des GSM-Moduls
        - Komponenten und Subsysteme
        - Administrative Bereiche:
            ...
            Location Area: aktueller Aufenthaltsbereich eines MS im Netz.
                           (genauste gegenfuehre Info ueber seinen Aufenthalsort)
            ...
            Zelle.
        - Kennziffern und Nummern
            ISMI Identification: nicht oeffentlich
            MSISDN Rufnummern: oeffentlich
            CAI
            ...

4.2.5 Mobile Dienste

    Traegerdineste
    Teledienste: Telefone, SMS, ...
    Zusatzdienste

4.2.6 Logische Kanaele

    Verkehrskanaele + Signalisierungskanaele
       `--> "B-Kanal"       `--> "D-Kanal"

    Diese logischen Kanaele werden z.B. beim Verbindungsaufbau verwendet. Sie
    werden weiterhin auf physikalische Kanaele abgebildet.

    Einfuehrendes Beispiel:
    Auf phys. Kanal werde eine Folge von TDMA-Zeitrahmen verschickt:

        TDMA - Rahmen T = L1 L2 L1 L3 L1 L2 L1 L3
                            Li = log. Kanal

        Solche TDMA-Rahmen koennen zu Multirahmen zusammengefasst werden:

                                   ,--> z.B. fuer logische Signalisierungskanaele
            T T T T T T T T T T T -

       GSM: TDMA-Rahmen, zusammengefast zu 26er- oder 51-Multirahmen

4.2.7 Protokolle

    Protokolle laufen an: Funkstelle: Um     - Schnittstelle
                                      A      - Schnittstelle
                                      A(bes) - Schnittstelle

        fuer: Gespraechsdatenuebertagung
             Datenuebertragung
             Signalisierung:  +--> CM
                              |`-> MM
                              |`-> RR
                               `-> LARDm

        RR: Ressource Management

            Protokoll zur Steuerung des Funkressourcen (Frequenz, physikalische
            Kanaele) auf tz Funkschnittstelle

            Aufgaben: z.B. Raging, Homdorse

            Messages

        MM: Mobility Management

            Protokoll zur Bereitstellung der Geraetemobilitaet

            Aufgaben: z.B. Location Update

            Messages

        CM: Connection Management

            Protokoll fuer: Steuerung von Nutzerdatenverbindungen
                Unterstuetzung von GSM-Zusatzdiensten
                SMS-Unterstuetzung

           Aufgaben:

           Messages

4.2.8 Mobilitaet

    Micomobilitaet, realisiert durch Handover-Prozeduren.
    Mediummobilitaet, realisiert durch Location-Update-Prozeduren
    Makromobilitaet, realisiert durch Roaming-Abkommen.

    Location Registration
        `--> Vorgang des Einbuchens eines Teilnehmers in ein Mobilfunknetz
                            `--> Anfordern + Erhalten eines Zugangs zum Netz.

    Wesentliche Punkte:
        - die Mobilstation (MS) gibt dem Netz IMSI und LAI an.
        - Visited Location Register (VLR) teilt der MS eine Roaming Number MSRN
          und eine temporaere Kennung TMSI zu.
        - die MCR erhaelt MSRN und IMSI
        - die MS enthaelt die TMSI

    Ergebnisse:
        - Benutzer (MS) angemeldet
        - sie ist der VLR als in ihrem Bereich praesent bekannt.
        - sie ist im HLR ueber ihre MSRN auffindbar
        - sie hat eine TMSI erhalten.

    Location Update:
        `--> Vorgang zur Aufenthalsaktualisierung einer Mobilstation in den
             Datenbasen VLR, HLR

        Wesentlich:
            - MS gibt dem Netz TMSI, CAI neu an.
            - VLR: neue TMSI
            - HLR: erhaelt neue zugeteilte MSRN
            - MS: erhaelt neue zugeteilte TMSI

        Ergebnisse: (analog zur Location Registration)
            - neue VLR
            - neue MSRN im HLR
            - neue TMSI

        Rufaufbau
            2 Phasen: - Wegesuche zum gerufenen Teilnehmer,
                      - eigentlicher Verbindungsaufbau.

        Handover
            `--> Umschaltung eines laufenden Gespraechs auf einen anderen
                 Funkkanal ohne Unterbrechung, i.A. bei Zellenwechsel

        Ablauf:
            - Messungen
            - Messungen schlecht -> Entscheidung zum Handover
            - Veranlassung des Handovers
            - Durchfuehrung
            - Abschluss
            - Messungen

        Inter-MSC-Handover:
            - Anchor-MSC: MSC, ueber die eine Gespraechsverbindung bei
                          Aufbau geschaltet wurde.
            - bei weitreichender geografischer Bewegung:

                              Inter-MSC-Handover
                Anchor-MSC <----------------------> MSC: Basic Handover

                bei weiterer weitreichender geografischer Bewegung:

                              Inter-MSC-Handover
                MSC        <----------------------> Anchor-MSC: Handback

                              Inter-MSC-Handover
                oder MSC   <----------------------> MSC: 1. Handback
                                                          (zur Anchor-MSC)
                                                         2. Basic Handover
                                                          (von der Anchor-MSC)
